



<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>



Part 1: First Attempts | The Tech Tree Blog


</title>
    <meta name="description" content="

A walkthrough of my idea and some attempts to implement it.

">
    

    <link rel="stylesheet" href="https:&#x2F;&#x2F;thetechtreeblog.com/pico.custom.css" media="screen">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;thetechtreeblog.com/gutenberg/gutenberg.css" media="print">
    <link rel="icon" href="https:&#x2F;&#x2F;thetechtreeblog.com/favicon.ico" sizes="any">
    <link rel="icon" href="https:&#x2F;&#x2F;thetechtreeblog.com/img/favicon/favicon.svg" type="image/svg+xml" sizes="any">
    <link rel="apple-touch-icon" href="https:&#x2F;&#x2F;thetechtreeblog.com/img/favicon/favicon-180.png">
    <link rel="manifest" href="https:&#x2F;&#x2F;thetechtreeblog.com/manifest.json">
    


<meta name="giscus:backlink" content="https://surajssingh.github.io/Tech-Tree-Blog/blog/better_sieve/part-1/">



<script type="module" defer>
    // Adapted from https://github.com/getzola/zola/issues/1285#issuecomment-870959320
    for (const ref of document.getElementsByClassName('footnote-reference')) {
        const hash = ref.children[0].hash.substring(1);
        const refhash = 'ref:' + hash;
        ref.id = refhash;
    }

    for (const footnote of document.getElementsByClassName('footnote-definition')) {
        const hash = footnote.id;
        const refhash = 'ref:' + hash;
        const backlink = document.createElement('a');
        backlink.href = '#' + refhash;
        backlink.className = 'footnote-backlink';
        backlink.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline xmlns="http://www.w3.org/2000/svg" points="10 9 15 4 20 9"/><path xmlns="http://www.w3.org/2000/svg" d="M4 20h7a4 4 0 0 0 4-4V4"/>â†©</svg>';
        const paras = footnote.children;
        const lastPara = paras[paras.length - 1];
        lastPara.appendChild(backlink);
    }
</script>

<script type="module" defer>
    // Adapted from https://www.roboleary.net/2022/01/13/copy-code-to-clipboard-blog.html
    const copyButtonLabel = '<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMin" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--contrast)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clipboard"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>';
    const successCopiedButtonLabel = '<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMin" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--contrast)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-square"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>';

    const successShowSeconds = 10;

    // use a class selector if available
    let blocks = document.querySelectorAll("pre");

    blocks.forEach((block) => {
        //        block.setAttribute("tabindex", 0);

        // only add button if browser supports Clipboard API
        if (navigator.clipboard) {
            let button = document.createElement("button");
            button.ariaLabel = "Copy To Clipboard";
            button.classList.add(["copy-code"]);
            button.classList.add(["outline"]);
            button.setAttribute("data-tooltip", "Copy To Clipboard");
            button.setAttribute("data-placement", "left");
            button.innerHTML = copyButtonLabel;
            block.prepend(button);

            button.addEventListener("click", async () => {
                await copyCode(block, button);
            });
        }
    });

    async function copyCode(block, button) {
        let code = block.querySelector("code");
        let text = code.innerHTML
            .replaceAll(/<span .*?>/g, "")
            .replaceAll(/<table><tbody><tr><td>\d+<\/td><td>/g, "")
            .replaceAll(/(<\/mark>)?<\/td><\/tr><tr><td>(<mark>)?\d+(<\/mark>)?<\/td><td>(<mark>)?/g, "")
            .replaceAll(/<\/td><\/tr><\/tbody><\/table>/g, "")
            .replaceAll("</span>", "")
            .replaceAll("&lt;", "<")
            .replaceAll("&gt;", ">");

        await navigator.clipboard.writeText(text);

        // visual feedback that task is completed
        button.innerHTML = successCopiedButtonLabel;
        button.setAttribute("data-tooltip", "Successfully Copied");

        setTimeout(() => {
            button.innerHTML = copyButtonLabel;
            button.setAttribute("data-tooltip", "Copy To Clipboard");
        }, 1000 * successShowSeconds);
    }
</script>




<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload='renderMathInElement(document.body,{delimiters:[
  {left: "$$", right: "$$", display: true},
  {left: "$", right: "$", display: false},
  {left: "\\(", right: "\\)", display: false},
  {left: "\\[", right: "\\]", display: true}
]});'></script>


  </head>

  <body>
    <header>
      
      <a href="#maincontent" role="button" aria-label="Skip To Main Content" class="outline">Skip To Main</a>
<nav>
    <ul>
        <li>
            

<a role="img" href='https:&#x2F;&#x2F;thetechtreeblog.com' title='Homepage'
    data-tooltip='Homepage' data-placement='right'
    aria-label="Homepage">
    <title>Homepage</title>
    <svg width="36" height="36" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class=''>
        <use href='https:&#x2F;&#x2F;thetechtreeblog.com/feather-sprite.svg#home' />
    </svg>
</a>

        </li>
    </ul>
    
    
    <ul>
        
        
        <li><a href='https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;'> Blog</a></li>
        
        
        <li><a href='https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;devlog&#x2F;'> Devlogs</a></li>
        
    </ul>
    
</nav>

<nav aria-label="breadcrumb">
    
    
    
    
    
    
    

    
    <ul>
        
        
        
        
        
        
        
        
        
        <li><a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;">Blog</a>
        </li>
        
        
        
        
        
        
        <li><a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;">A Better Sieve</a>
        </li>
        
        
        
        
        <li><a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;" aria-current="page" tabindex="-1">Part 1: First Attempts</a></li>
        
    </ul>
</nav>


      
    </header>
    <main id="maincontent">
      <article>
        

<header>
 

<hgroup>
    <a href="#maincontent">
        <h1 class="zola-anchor">
            Part 1: First Attempts
        </h1>
    </a>
    
    <p>A walkthrough of my idea and some attempts to implement it.</p>
    
</hgroup>

    <details>
        <summary>Page Details</summary>
        
        
        <p>
            
            Author: Suraj S. Singh
            
        </p>
        
        
        <p>Word Count: 4513 words</p>
        
        <p>
            
            
            <strong>First Created: 2023-04-09</strong>
            
            
            <br />
            
        </p>
        <p>
            <em>License:
                
                <a href='https://creativecommons.org/licenses/by-nc-sa/4.0/'><abbr
                        title='Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International'>CC BY-NC-SA 4.0<abbr></a>
                
            </em>
        </p>
        <p>
        
            Tags: <br />
        <dl aria-label="taglist">
            
            
            <dt>
                <a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;programming-language&#x2F;">
                    programming-language
                </a>
            </dt>
            
            
            <dd>
                <a href="https://thetechtreeblog.com/programming-language/python/">python</a>
            </dd>
            
            
            
        </dl>
        
        </p>
    </details>
</header>

        


<nav aria-label="table-of-content">
    <details>
        <summary role="button">Table Of Contents</summary>
        <details open>
        <summary><a href="https://thetechtreeblog.com/blog/better_sieve/part-1/#">Part 1: First Attempts</a></summary>
        <ol>
            
                <li>
                    

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#simple-generator-version">Simple Generator Version</a>


                    </li>
            
                <li>
                    

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#idea-summary">Idea Summary</a>


                    </li>
            
                <li>
                    

<details open>
    <summary> <a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#setup">Setup</a></summary>
    <ol>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#imports">Imports</a>

</li>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#helper-classes-and-functions">Helper classes and functions</a>

</li>
        
    </ol>
</details>


                    </li>
            
                <li>
                    

<details open>
    <summary> <a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#attempts">Attempts</a></summary>
    <ol>
        
        <li>

<details open>
    <summary> <a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#attempt-1">Attempt 1</a></summary>
    <ol>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#data-setup">Data Setup</a>

</li>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#inside-the-loop">Inside the Loop</a>

</li>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#return">Return</a>

</li>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#full-code">Full Code</a>

</li>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#analysis">Analysis</a>

</li>
        
    </ol>
</details>

</li>
        
        <li>

<details open>
    <summary> <a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#attempt-2">Attempt 2</a></summary>
    <ol>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#update-setup">Update Setup</a>

</li>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#update-loop">Update Loop</a>

</li>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#full-code-1">Full Code</a>

</li>
        
        <li>

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#analysis-1">Analysis</a>

</li>
        
    </ol>
</details>

</li>
        
    </ol>
</details>


                    </li>
            
                <li>
                    

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#conclusion">Conclusion</a>


                    </li>
            
                <li>
                    

<a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-1&#x2F;#footnotes">Footnotes</a>


                    </li>
            
            
            <li> <a href="#comments">Comments</a></li>
            
        </ol>
        </details>
        </details>
</nav>


<section id="content">
<p>In this post, I will go over some of my attempts to implement a better version of the Sieve of Eratosthenes.</p>
<span id="continue-reading"></span>
<p>If you would like to read up on the background information for this topic, please see <a href="https://thetechtreeblog.com/blog/better_sieve/part-0/">Part 0</a>.</p>
<details>
    
    <summary>TL;DR Summary</summary>
    
    
    <p>I have an idea to take a range generator and try to yield only prime numbers by figuring out a pattern to skip each multiple of the prime. The hard part is to somehow skip when previous skips are already applied (for example, when skipping multiples of 3, we don't need to consider 6, since we skipped it at 2). I then document 2 attempts at a solution, each of which works for small numbers, but fails at 1331 and 1573. I come to realize that I need to figure out how to find the pattern more mathematically.</p>

    
</details><h2 id="simple-generator-version"><a class="zola-anchor" href="#simple-generator-version" aria-label="Anchor link for: simple-generator-version">Simple Generator Version</a></h2>
<p>To set a baseline, I created a simple generator version adapted from my <a href="https://exercism.org/tracks/rust/exercises/sieve">first iteration of the Sieve exercise for Rust</a> on Exercism.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>1</td><td><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">sieve_generator</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">end</span></span><span class="z-meta z-function z-parameters z-annotation z-python"><span class="z-punctuation z-separator z-annotation z-parameter z-python">:</span> <span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">int</span></span> </span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">100</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python"><span class="z-punctuation z-section z-function z-begin z-python">:</span></span>
</td></tr><tr><td>2</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> List of primes currently found
</span></td></tr><tr><td>3</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">currently_found_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-empty z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>4</td><td>
</td></tr><tr><td>5</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> For every number from 2 up to the end number
</span></td></tr><tr><td>6</td><td>    <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">number</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">range</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>7</td><td>
</td></tr><tr><td>8</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Note: (number % prime) when converted to boolean
</span></td></tr><tr><td>9</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>       means the same as (number % prime) != 0
</span></td></tr><tr><td>10</td><td>        
</td></tr><tr><td>11</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> If for every prime in currently found primes, number % prime != 0...
</span></td></tr><tr><td>12</td><td>        <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">all</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-group z-python"><span class="z-punctuation z-section z-group z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">number</span></span> <span class="z-keyword z-operator z-arithmetic z-python">%</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">prime</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">prime</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">currently_found_primes</span></span><span class="z-punctuation z-section z-group z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>13</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Append it to currently found primes list,
</span></td></tr><tr><td>14</td><td>            <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">currently_found_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">number</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>15</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> and yield the number.
</span></td></tr><tr><td>16</td><td>            <span class="z-keyword z-control z-flow z-yield z-python">yield</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">number</span></span>
</td></tr><tr><td>17</td><td>
</td></tr><tr><td>18</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Once finished, return the the list of found primes.
</span></td></tr><tr><td>19</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> As this is a generator, this list is the value assigned
</span></td></tr><tr><td>20</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> to the StopIteration exception
</span></td></tr><tr><td>21</td><td>    <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">currently_found_primes</span></span>
</td></tr></span></tbody></table></code></pre>
<p>The goal for my attempts is to be as efficient and accurate as this.</p>
<p><em>Note 1: This is meant to be the minimal standard version. Improvements can easily be made to this function.</em><br />
<em>Note 2: This is a generator that also returns a value. One can either take primes as they are generated or wait until the StopIteration exception is raised to get the fully formed list.</em></p>
<h2 id="idea-summary"><a class="zola-anchor" href="#idea-summary" aria-label="Anchor link for: idea-summary">Idea Summary</a></h2>
<p>The main idea, as described in <a href="https://thetechtreeblog.com/blog/better_sieve/part-0/#current-idea">part 0</a>, is to take a range object and refine it with a pattern of skips to get all prime numbers out.
Both Python and Rust have lazy ranges, meaning the values inside the range are not held in memory, rather they are only produced when they are requested upon.
Ranges can be modified with skip and step-by functions to automatically jump over certain values.
All of this combined could help build a better generator function, as it would only need to hold the current range it is working on and yield from there.
However, this only works if the pattern of skips, or rather pattern of keeping values, is tailored to each successive range so that it produces the appropriate value.
In this case, producing only values that are not a multiple of the prime being looked at.</p>
<h2 id="setup"><a class="zola-anchor" href="#setup" aria-label="Anchor link for: setup">Setup</a></h2>
<h3 id="imports"><a class="zola-anchor" href="#imports" aria-label="Anchor link for: imports">Imports</a></h3>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>1</td><td><span class="z-source z-python"><span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-from z-python">from</span></span><span class="z-meta z-statement z-import z-python"><span class="z-meta z-import-source z-python"> <span class="z-meta z-import-path z-python"><span class="z-meta z-import-name z-python">collections</span></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-python">import</span></span></span></span><span class="z-meta z-statement z-import z-python"></span><span class="z-meta z-statement z-import z-python"> <span class="z-meta z-generic-name z-python">Counter</span><span class="z-punctuation z-separator z-import-list z-python">,</span> <span class="z-meta z-generic-name z-python">deque</span></span>
</td></tr><tr><td>2</td><td><span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-from z-python">from</span></span><span class="z-meta z-statement z-import z-python"><span class="z-meta z-import-source z-python"> <span class="z-meta z-import-path z-python"><span class="z-meta z-import-name z-python">itertools</span></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-python">import</span></span></span></span><span class="z-meta z-statement z-import z-python"></span><span class="z-meta z-statement z-import z-python"> <span class="z-meta z-generic-name z-python">count</span><span class="z-punctuation z-separator z-import-list z-python">,</span> <span class="z-meta z-generic-name z-python">takewhile</span><span class="z-punctuation z-separator z-import-list z-python">,</span> <span class="z-meta z-generic-name z-python">tee</span></span>
</td></tr><tr><td>3</td><td><span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-from z-python">from</span></span><span class="z-meta z-statement z-import z-python"><span class="z-meta z-import-source z-python"> <span class="z-meta z-import-path z-python"><span class="z-meta z-import-name z-python">more_itertools</span></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-python">import</span></span></span></span><span class="z-meta z-statement z-import z-python"></span><span class="z-meta z-statement z-import z-python"> <span class="z-meta z-generic-name z-python">peekable</span></span>
</td></tr></span></tbody></table></code></pre>
<ol>
<li><a href="https://docs.python.org/3/library/collections.html">collections</a> from the standard library:
<ul>
<li><a href="https://docs.python.org/3/library/collections.html#collections.Counter"><code>Counter</code></a>: Used to hold a count of numbers.</li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.deque"><code>deque</code></a>: Used for a queue data structure. </li>
</ul>
</li>
<li><a href="https://docs.python.org/3/library/itertools.html">itertools</a> from the standard library:
<ul>
<li><a href="https://docs.python.org/3/library/itertools.html#itertools.count"><code>count</code></a>: Used to emulate an infinite <code>range()</code>.</li>
<li><a href="https://docs.python.org/3/library/itertools.html#itertools.takewhile"><code>takewhile</code></a>: Keep taking from an iterator while some condition is true.</li>
<li><a href="https://docs.python.org/3/library/itertools.html#itertools.tee"><code>tee</code></a>: Used to make a copy of an iterator.</li>
</ul>
</li>
<li><a href="https://github.com/more-itertools/more-itertools">more_itertools library</a>:
<ul>
<li><a href="https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.peekable"><code>peekable</code></a>: Allow one item look-ahead for a generator/iterator.</li>
</ul>
</li>
</ol>
<h3 id="helper-classes-and-functions"><a class="zola-anchor" href="#helper-classes-and-functions" aria-label="Anchor link for: helper-classes-and-functions">Helper classes and functions</a></h3>
<p>Below are a set of helper functions:
A function that takes a generator and returns the first value and the remaining generator. Think of this as a combined <code>head</code> function and <code>tail</code> function starting at the first item from other languages like Haskell and R. I will use this to retrieve the first value while also skipping it in the generator (acts like <code>skip()</code>).</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>1</td><td><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">generator_take_first</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">gen</span><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python"><span class="z-punctuation z-section z-function z-begin z-python">:</span></span>
</td></tr><tr><td>2</td><td>    <span class="z-meta z-statement z-exception z-try z-python"><span class="z-keyword z-control z-exception z-try z-python">try</span><span class="z-punctuation z-section z-block z-exception z-try z-python">:</span></span>
</td></tr><tr><td>3</td><td>        <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">gen</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">gen</span></span>
</td></tr><tr><td>4</td><td>    <span class="z-meta z-statement z-exception z-catch z-python"><span class="z-keyword z-control z-exception z-catch z-python">except</span> <span class="z-support z-type z-exception z-python">StopIteration</span><span class="z-punctuation z-section z-block z-exception z-catch z-python">:</span></span>
</td></tr><tr><td>5</td><td>        <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-constant z-language z-python">None</span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">gen</span></span>
</td></tr></span></tbody></table></code></pre>
<ol start="2">
<li>A function that takes a generator and a list of how many indices to keep, and then yields that many values, skipping the next value when the pattern changes. This implements the <code>keeper()</code> function used above.</li>
</ol>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>1</td><td><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">generator_keep_then_skip_once</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">gen</span><span class="z-punctuation z-separator z-parameters z-python">,</span> <span class="z-variable z-parameter z-python">keep_pattern</span> </span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-language z-python">None</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python"><span class="z-punctuation z-section z-function z-begin z-python">:</span></span>
</td></tr><tr><td>2</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Keep index when pattern is a list
</span></td></tr><tr><td>3</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_index</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-language z-python">None</span>
</td></tr><tr><td>4</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> If pattern is None or empty list, then keep everything
</span></td></tr><tr><td>5</td><td>    <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span> <span class="z-keyword z-operator z-logical z-python">is</span> <span class="z-constant z-language z-python">None</span> <span class="z-keyword z-operator z-logical z-python">or</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-sequence z-list z-empty z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>6</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">0</span>
</td></tr><tr><td>7</td><td>    <span class="z-meta z-statement z-conditional z-elseif z-python"><span class="z-keyword z-control z-conditional z-elseif z-python">elif</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">isinstance</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">int</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-logical z-python">and</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span> <span class="z-keyword z-operator z-comparison z-python">&gt;=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">0</span><span class="z-punctuation z-section z-block z-conditional z-elseif z-python">:</span></span>
</td></tr><tr><td>8</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span>
</td></tr><tr><td>9</td><td>    <span class="z-meta z-statement z-conditional z-elseif z-python"><span class="z-keyword z-control z-conditional z-elseif z-python">elif</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">isinstance</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">list</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-logical z-python">and</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">len</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">&gt;</span> <span class="z-constant z-numeric z-integer z-decimal z-python">0</span><span class="z-punctuation z-section z-block z-conditional z-elseif z-python">:</span></span>
</td></tr><tr><td>10</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span>
</td></tr><tr><td>11</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_index</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">0</span>
</td></tr><tr><td>12</td><td>    <span class="z-meta z-statement z-conditional z-else z-python"><span class="z-keyword z-control z-conditional z-else z-python">else</span><span class="z-punctuation z-section z-block z-conditional z-else z-python">:</span></span>
</td></tr><tr><td>13</td><td>        <span class="z-meta z-statement z-raise z-python"><span class="z-keyword z-control z-flow z-raise z-python">raise</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-type z-exception z-python">ValueError</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-storage z-type z-string z-python">f</span><span class="z-meta z-string z-interpolated z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-interpolated z-python"><span class="z-string z-quoted z-double z-python">Expected a None, int, or list of ints for keep_pattern: got </span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-begin z-python">{</span><span class="z-source z-python z-embedded"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_pattern</span></span></span></span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-end z-python">}</span></span><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span></span>
</td></tr><tr><td>14</td><td>    
</td></tr><tr><td>15</td><td>    <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-constant z-language z-python">True</span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>16</td><td>        <span class="z-meta z-statement z-exception z-try z-python"><span class="z-keyword z-control z-exception z-try z-python">try</span><span class="z-punctuation z-section z-block z-exception z-try z-python">:</span></span> 
</td></tr><tr><td>17</td><td>            <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_by</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep</span></span> <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_index</span></span> <span class="z-keyword z-operator z-logical z-python">is</span> <span class="z-constant z-language z-python">None</span> <span class="z-keyword z-control z-conditional z-else z-python">else</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_index</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span></span>
</td></tr><tr><td>18</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Keep these value
</span></td></tr><tr><td>19</td><td>            <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-variable z-language z-python">_</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">range</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_by</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>20</td><td>                <span class="z-keyword z-control z-flow z-yield z-python">yield</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">gen</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>21</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip this one
</span></td></tr><tr><td>22</td><td>            <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">gen</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>23</td><td>
</td></tr><tr><td>24</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Move to next item in pattern if pattern is a list
</span></td></tr><tr><td>25</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Cycle back around when it reaches the end
</span></td></tr><tr><td>26</td><td>            <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_index</span></span> <span class="z-keyword z-operator z-logical z-python">is</span> <span class="z-keyword z-operator z-logical z-python">not</span> <span class="z-constant z-language z-python">None</span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>27</td><td>                <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_index</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-group z-python"><span class="z-punctuation z-section z-group z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_index</span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-section z-group z-end z-python">)</span></span> <span class="z-keyword z-operator z-arithmetic z-python">%</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">len</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>28</td><td>            
</td></tr><tr><td>29</td><td>        <span class="z-meta z-statement z-exception z-catch z-python"><span class="z-keyword z-control z-exception z-catch z-python">except</span> <span class="z-support z-type z-exception z-python">StopIteration</span><span class="z-punctuation z-section z-block z-exception z-catch z-python">:</span></span>
</td></tr><tr><td>30</td><td>            <span class="z-keyword z-control z-flow z-break z-python">break</span>
</td></tr></span></tbody></table></code></pre>
<ol start="3">
<li>A function that takes a list and tries to find the shortest repeating pattern length. This is able to also handle partially defined patterns, for example: given $[2,4,5,2,4,5,2]$, it will determine that a length of 3 is enough to repeat, even though the last &quot;pattern&quot; is not fully defined. This does create an issue of how do we know if the pattern is correct (there might not be a pattern). This function does not address this, merely its goal is to find the shortest possible pattern which can satisfy if we assumed it repeated.</li>
</ol>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>1</td><td><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">shortest_periodic_pattern</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">list_with_pattern</span></span><span class="z-meta z-function z-parameters z-annotation z-python"><span class="z-punctuation z-separator z-annotation z-parameter z-python">:</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">int</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python"> </span><span class="z-meta z-function z-annotation z-return z-python"><span class="z-punctuation z-separator z-annotation z-return z-python">-&gt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">int</span></span></span><span class="z-meta z-function z-python"><span class="z-punctuation z-section z-function z-begin z-python">:</span></span>
</td></tr><tr><td>2</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_pattern_len</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">len</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">list_with_pattern</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>3</td><td>    <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">length</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">range</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_pattern_len</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>4</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">list_with_pattern</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-punctuation z-separator z-slice z-python">:</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">length</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span>
</td></tr><tr><td>5</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">chunks</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">list_with_pattern</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">i</span></span><span class="z-punctuation z-separator z-slice z-python">:</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">i</span></span><span class="z-keyword z-operator z-arithmetic z-python">+</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">length</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">i</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">range</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">0</span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_pattern_len</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">length</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>6</td><td>        <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">chunk</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">chunks</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>7</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Check for any failing chunks
</span></td></tr><tr><td>8</td><td>            <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">chunk</span></span> <span class="z-keyword z-operator z-comparison z-python">!=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-punctuation z-separator z-slice z-python">:</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">len</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">chunk</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>9</td><td>                <span class="z-keyword z-control z-flow z-break z-python">break</span>
</td></tr><tr><td>10</td><td>        <span class="z-meta z-statement z-conditional z-else z-python"><span class="z-keyword z-control z-conditional z-else z-python">else</span><span class="z-punctuation z-section z-block z-conditional z-else z-python">:</span></span> <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> no-break - found length
</span></td></tr><tr><td>11</td><td>            <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">length</span></span>
</td></tr><tr><td>12</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Default length is full length
</span></td></tr><tr><td>13</td><td>    <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_pattern_len</span></span>
</td></tr></span></tbody></table></code></pre>
<h2 id="attempts"><a class="zola-anchor" href="#attempts" aria-label="Anchor link for: attempts">Attempts</a></h2>
<h3 id="attempt-1"><a class="zola-anchor" href="#attempt-1" aria-label="Anchor link for: attempt-1">Attempt 1</a></h3>
<p>Below is my first attempt at the problem, which successfully generates primes up to 1330.
The code is encapsulated in a function that has one parameter called <code>final_number</code>, which is the number to generate the primes up to.
I broke up the code into specific sections, but you can find the full code at the end of the section.</p>
<p>The overall steps are as follows:</p>
<ol>
<li>Get the current prime to sieve the current range generator.</li>
<li>Create a list of multiples of the current prime that are still in the range.</li>
<li>Use that list of multiples to find a pattern for how many numbers to keep between each multiple.</li>
<li>Update the range generator to follow the keep pattern found.</li>
<li>Start again from step 1 if we have not reached the end.</li>
</ol>
<h4 id="data-setup"><a class="zola-anchor" href="#data-setup" aria-label="Anchor link for: data-setup">Data Setup</a></h4>
<p>Before the loop, I set up three variables to help out with the process:</p>
<ul>
<li><code>already_sieved_primes</code>: A list of known primes that have already been used.</li>
<li><code>helping_sieve_primes</code>: A list of prime numbers that still need to be looked at and have their multiples removed.</li>
<li><code>current_running_range</code>: The <strong>dynamic</strong> range object that will change as it follows through the loop.</li>
</ul>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>2</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Primes that have already been processed and whose multiples can never appear in the range
</span></td></tr><tr><td>3</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-empty z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>4</td><td>
</td></tr><tr><td>5</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Prime numbers that are between p and p^2.
</span></td></tr><tr><td>6</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   To help find the keep pattern
</span></td></tr><tr><td>7</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">deque</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>8</td><td>
</td></tr><tr><td>9</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> The range that is running
</span></td></tr><tr><td>10</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   Starts with unbounded range: 3... step by 1 
</span></td></tr><tr><td>11</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">count</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">3</span><span class="z-punctuation z-separator z-arguments z-python">,</span><span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>The already sieved primes list is there for building the final list to return. 
If no return was needed, I could just remove that variable, as it serves no other purpose as of now.
On the other hand, the helping sieve primes list and current running range variables are central to the algorithm.
The helpers inside the list will provide all the primes still needing to go through the loop and will be used to help create the &quot;in-between&quot; items to figure out the pattern for keeping values.<br />
The current range keeps track of all the applied keep functions to make sure that the range is producing the correct value.</p>
<h4 id="inside-the-loop"><a class="zola-anchor" href="#inside-the-loop" aria-label="Anchor link for: inside-the-loop">Inside the Loop</a></h4>
<p>In the main loop (currently implemented as a <code>while True</code>), we can go through the process of refining the sieve.</p>
<p>The first thing to do is to figure out the prime number to sieve out (from here, referred to as <code>p</code>).
In this case, we'll just take out the first prime number from the previous step(s) that still needs to be processed (in the helper list).
The currently running range can also be made peekable to allow looking at one next step. </p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>15</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> The current prime to sieve (ref as &quot;p&quot;)
</span></td></tr><tr><td>16</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">popleft</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>17</td><td>
</td></tr><tr><td>18</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Make current range with one look ahead
</span></td></tr><tr><td>19</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peekable</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>With the prime number to sieve determined, we can get all the numbers in the range up to the prime squared (<code>p^2</code>), as they are guaranteed to be prime (as <code>p^2</code> is the smallest current composite number in the range). 
This will do two things: 1) provide more numbers to help sieve out more multiples of the current prime <code>p</code>, and 2) move the range up to <code>p^2</code> and thus reduce the numbers need to &quot;check&quot;.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>21</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> While the next number is smaller than p^2
</span></td></tr><tr><td>22</td><td><span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>23</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Add next value in range to helping sieve
</span></td></tr><tr><td>24</td><td>    <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>We will then create a list of multiples to remove from the range, using <code>p</code> and the primes from the helper list.
It is not yet known if these numbers will be enough to determine the pattern, but I will work with the assumption that it will be.
We also need a copy of the current range and a counter.
The copy is to allow getting numbers with the range without actually moving the range.
The counter is to count the numbers that are in between each adjacent multiple.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>26</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a list of multiples divisible by sieving prime not already removed from before
</span></td></tr><tr><td>27</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">p</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>28</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a copy of the current range 
</span></td></tr><tr><td>29</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">tee</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>30</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Make the copied range peekable
</span></td></tr><tr><td>31</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peekable</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>32</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a counter to count how many numbers are between two multiples of p
</span></td></tr><tr><td>33</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">Counter</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>Now, let's count the numbers between each adjacent set of two multiples and use that to update the counter.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>35</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> For each start and end point (a number in between list and the next number after)
</span></td></tr><tr><td>36</td><td><span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">start</span><span class="z-punctuation z-separator z-target-list z-python">,</span> <span class="z-meta z-generic-name z-python">end</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">zip</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-separator z-slice z-python">:</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>37</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count how many primes from helping primes list are in between start and end
</span></td></tr><tr><td>38</td><td>    <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">helper</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>39</td><td>        <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helper</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>40</td><td>            <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-sequence z-tuple z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-sequence z-end z-python">)</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-keyword z-operator z-assignment z-augmented z-python">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span>
</td></tr><tr><td>41</td><td>
</td></tr><tr><td>42</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip the number if it is the start or end 
</span></td></tr><tr><td>43</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>44</td><td>    <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-logical z-python">or</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>45</td><td>        <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>46</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>47</td><td>
</td></tr><tr><td>48</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count how many items that are between start and end inside the copied range
</span></td></tr><tr><td>49</td><td>    <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>50</td><td>        <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>51</td><td>        <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-sequence z-tuple z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-sequence z-end z-python">)</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-keyword z-operator z-assignment z-augmented z-python">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span>
</td></tr><tr><td>52</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>We can then use the values in the counter to create a list of numbers to keep following a specific pattern, using the <code>shortest_periodic_pattern</code> function to get the most compact pattern.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>56</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip first in list because already processed
</span></td></tr><tr><td>57</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">key</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">key</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">sorted</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">keys</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-separator z-slice z-python">:</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>58</td><td>
</td></tr><tr><td>59</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Find the pattern
</span></td></tr><tr><td>60</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">shortest_periodic_pattern</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>61</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-punctuation z-separator z-slice z-python">:</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span> <span class="z-keyword z-operator z-comparison z-python">&gt;</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span> <span class="z-keyword z-control z-conditional z-else z-python">else</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span></span>
</td></tr></span></tbody></table></code></pre>
<p>Then we can start finishing up.
We can add <code>p</code> into the list of already sieved primes and update the max prime with the latest number in the helper list.
If the max prime is bigger than or equal to the final number to calculate, we are done with the loop and so we stop.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>63</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Finished with prime so move it to already sieved
</span></td></tr><tr><td>64</td><td><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>65</td><td>
</td></tr><tr><td>66</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Get the max prime
</span></td></tr><tr><td>67</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_prime</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-keyword z-operator z-arithmetic z-python">-</span><span class="z-constant z-numeric z-integer z-decimal z-python">1</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span>
</td></tr><tr><td>68</td><td>
</td></tr><tr><td>69</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Check that we have produced enough primes
</span></td></tr><tr><td>70</td><td><span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_prime</span></span> <span class="z-keyword z-operator z-comparison z-python">&gt;=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">final_number</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>71</td><td>    <span class="z-keyword z-control z-flow z-break z-python">break</span>
</td></tr></span></tbody></table></code></pre>
<p>Otherwise, moving along, we can update the currently running range by removing the first value (should be <code>p^2</code>) and running the keep-skip function with the pattern.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>73</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Remove square of prime for the current range
</span></td></tr><tr><td>74</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">square_of_prime</span></span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">generator_take_first</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>75</td><td>
</td></tr><tr><td>76</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Verify that we have removed the prime squared as the first item
</span></td></tr><tr><td>77</td><td><span class="z-keyword z-control z-flow z-assert z-python">assert</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">square_of_prime</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span> 
</td></tr><tr><td>78</td><td>
</td></tr><tr><td>79</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Produce the next range
</span></td></tr><tr><td>80</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">generator_keep_then_skip_once</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<h4 id="return"><a class="zola-anchor" href="#return" aria-label="Anchor link for: return">Return</a></h4>
<p>Once the loop is finished, return all the primes that have been already sieved as well as the number of primes still in the queue to be processed (up to the final number).</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>83</td><td><span class="z-source z-python"><span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">p</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span> <span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">final_number</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr></span></tbody></table></code></pre>
<h4 id="full-code"><a class="zola-anchor" href="#full-code" aria-label="Anchor link for: full-code">Full Code</a></h4>
<details>
    
    <summary>Attempt 1 Full Code</summary>
    
    
    <pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>1</td><td><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">new_sieve_attempt_1</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">final_number</span></span><span class="z-meta z-function z-parameters z-annotation z-python"><span class="z-punctuation z-separator z-annotation z-parameter z-python">:</span><span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">int</span></span> </span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1330</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python"> </span><span class="z-meta z-function z-annotation z-return z-python"><span class="z-punctuation z-separator z-annotation z-return z-python">-&gt;</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">int</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span></span><span class="z-meta z-function z-python"><span class="z-punctuation z-section z-function z-begin z-python">:</span></span>
</td></tr><tr><td>2</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Primes that have already been processed and whose multiples can never appear in the range
</span></td></tr><tr><td>3</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-empty z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>4</td><td>
</td></tr><tr><td>5</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Prime numbers that are between p and p^2.
</span></td></tr><tr><td>6</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   To help find the keep pattern
</span></td></tr><tr><td>7</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">deque</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>8</td><td>    
</td></tr><tr><td>9</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> The range that is running
</span></td></tr><tr><td>10</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   Starts with unbounded range: 3... step by 1 
</span></td></tr><tr><td>11</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">count</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">3</span><span class="z-punctuation z-separator z-arguments z-python">,</span><span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>12</td><td>
</td></tr><tr><td>13</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Run forever (allow infinite range)
</span></td></tr><tr><td>14</td><td>    <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-constant z-language z-python">True</span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>15</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> The current prime to sieve (ref as &quot;p&quot;)
</span></td></tr><tr><td>16</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">popleft</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>17</td><td>
</td></tr><tr><td>18</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Make current range with one look ahead
</span></td></tr><tr><td>19</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peekable</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>20</td><td>        
</td></tr><tr><td>21</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> While the next number is smaller than p^2
</span></td></tr><tr><td>22</td><td>        <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>23</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Add next value in range to helping sieve
</span></td></tr><tr><td>24</td><td>            <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>25</td><td>
</td></tr><tr><td>26</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a list of multiples divisible by sieving prime not already removed from before
</span></td></tr><tr><td>27</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">p</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>28</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a copy of the current range 
</span></td></tr><tr><td>29</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">tee</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>30</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Make the copied range peekable
</span></td></tr><tr><td>31</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peekable</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>32</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a counter to count how many numbers are between two multiples of p
</span></td></tr><tr><td>33</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">Counter</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>34</td><td>
</td></tr><tr><td>35</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> For each start and end point (a number in between list and the next number after)
</span></td></tr><tr><td>36</td><td>        <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">start</span><span class="z-punctuation z-separator z-target-list z-python">,</span> <span class="z-meta z-generic-name z-python">end</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">zip</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-separator z-slice z-python">:</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>37</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count how many primes from helping primes list are in between start and end
</span></td></tr><tr><td>38</td><td>            <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">helper</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>39</td><td>                <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helper</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>40</td><td>                    <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-sequence z-tuple z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-sequence z-end z-python">)</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-keyword z-operator z-assignment z-augmented z-python">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span>
</td></tr><tr><td>41</td><td>
</td></tr><tr><td>42</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip the number if it is the start or end 
</span></td></tr><tr><td>43</td><td>            <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>44</td><td>            <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-logical z-python">or</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>45</td><td>                <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>46</td><td>                <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>47</td><td>
</td></tr><tr><td>48</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count how many items that are between start and end inside the copied range
</span></td></tr><tr><td>49</td><td>            <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>50</td><td>                <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>51</td><td>                <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-sequence z-tuple z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-sequence z-end z-python">)</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-keyword z-operator z-assignment z-augmented z-python">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span>
</td></tr><tr><td>52</td><td>                <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>53</td><td>
</td></tr><tr><td>54</td><td>
</td></tr><tr><td>55</td><td>
</td></tr><tr><td>56</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip first in list because already processed
</span></td></tr><tr><td>57</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">key</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">key</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">sorted</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">keys</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-separator z-slice z-python">:</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>58</td><td>
</td></tr><tr><td>59</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Find the pattern
</span></td></tr><tr><td>60</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">shortest_periodic_pattern</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>61</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-punctuation z-separator z-slice z-python">:</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span> <span class="z-keyword z-operator z-comparison z-python">&gt;</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span> <span class="z-keyword z-control z-conditional z-else z-python">else</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span></span>
</td></tr><tr><td>62</td><td>        
</td></tr><tr><td>63</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Finished with prime so move it to already sieved
</span></td></tr><tr><td>64</td><td>        <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>65</td><td>        
</td></tr><tr><td>66</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Get the max prime
</span></td></tr><tr><td>67</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_prime</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-keyword z-operator z-arithmetic z-python">-</span><span class="z-constant z-numeric z-integer z-decimal z-python">1</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span>
</td></tr><tr><td>68</td><td>        
</td></tr><tr><td>69</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Check that we have produced enough primes
</span></td></tr><tr><td>70</td><td>        <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_prime</span></span> <span class="z-keyword z-operator z-comparison z-python">&gt;=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">final_number</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>71</td><td>            <span class="z-keyword z-control z-flow z-break z-python">break</span>
</td></tr><tr><td>72</td><td>        
</td></tr><tr><td>73</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Remove square for prime from the current range
</span></td></tr><tr><td>74</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">square_of_prime</span></span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">generator_take_first</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>75</td><td>
</td></tr><tr><td>76</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Verify that we have removed the prime squared as the first item
</span></td></tr><tr><td>77</td><td>        <span class="z-keyword z-control z-flow z-assert z-python">assert</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">square_of_prime</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span> 
</td></tr><tr><td>78</td><td>
</td></tr><tr><td>79</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Produce the next range
</span></td></tr><tr><td>80</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">generator_keep_then_skip_once</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>81</td><td>        
</td></tr><tr><td>82</td><td>
</td></tr><tr><td>83</td><td>    <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">p</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span> <span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">final_number</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr></span></tbody></table></code></pre>

    
</details><h4 id="analysis"><a class="zola-anchor" href="#analysis" aria-label="Anchor link for: analysis">Analysis</a></h4>
<p>For my first attempt, the idea seems to be simple enough to follow. 
Have a range, gather some known primes, use that to generate a pattern for which numbers to keep, update the range, rinse and repeat.
Because of this simplicity, it might not be surprising that there are issues with the function.</p>
<p>The main issue I found is that while it works well for small numbers, it fails when it reaches $1331$ (which is $11^3$).
When running this, the function allows 1331 to be kept as a prime when it is not.
I appear to be missing the repeating pattern for when the range reaches $11$.
There likely is an issue with developing the pattern for $11$, either that it is incomplete or there is no pattern for $11$.</p>
<p>There is also the issue of the assertion being broken when sieving $53$, as the first value of the updated range is not its square ($2809$), but rather $2813$.
This is likely a carry over for the issue that happens at $11$, or technically just before it.
Notice that $53$ is the first prime after $49$, which is the square of $7$.
This lends more evidence that something is amiss for the $11$ pattern, as all prime numbers below it are fine, but after that is not.</p>
<p>Besides those two issues, other improvements I could consider would be removing some unnecessary calculations. 
For example, start with the &quot;evens&quot; already sieved out and have 2 already processed.
Maybe also do the same for multiples of 3, as that is also an easy one to process.
Another idea might be to include more known primes in the helper list, say by getting all the additional primes between the first and second composite numbers, which could help with finding the pattern.</p>
<h3 id="attempt-2"><a class="zola-anchor" href="#attempt-2" aria-label="Anchor link for: attempt-2">Attempt 2</a></h3>
<p>My second attempt uses the framework of the previous attempt and tries to improve it in certain ways. 
I will only go over the changes to the code, all other code snippets should be the same as the previous attempt.
See the full attempt towards the end of this section for the full code.</p>
<h4 id="update-setup"><a class="zola-anchor" href="#update-setup" aria-label="Anchor link for: update-setup">Update Setup</a></h4>
<p>For the set-up before the loop, I chose to start from 3 rather than 2 to help with processing the range and remove one level of the keep function.
This means adding a check for the special case of the final number less than 2 (since 2 will have been processed once we reach the loop).
With that, 3 moves into the helping sieve list (in preparation for being the next prime to process) and the new range starts from 5 (one above the square of 2) and step up by 2 (skips even numbers).</p>
<p>One other code change I apply is calculating <code>max_prime</code> before the loop.
Since 2 is already processed, <code>max_prime</code> can be reasonably defined as 3 at the start (the last number in the primes to be processed).
This will help remove the need to add and conditional check inside the while loop (i.e. max prime check can directly be the condition for the while). </p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>2</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Special case: There are no primes less than 2
</span></td></tr><tr><td>3</td><td><span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">final_number</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>4</td><td>    <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-sequence z-list z-empty z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>5</td><td>
</td></tr><tr><td>6</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Primes that have already been processed and whose multiples can never appear in the range
</span></td></tr><tr><td>7</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>8</td><td>
</td></tr><tr><td>9</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Prime numbers that are between the current prime and its square.
</span></td></tr><tr><td>10</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   To help find the keep pattern
</span></td></tr><tr><td>11</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">deque</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-constant z-numeric z-integer z-decimal z-python">3</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>12</td><td>
</td></tr><tr><td>13</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> The range that is running
</span></td></tr><tr><td>14</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   Starts the unbounded range with 5 and step by 2: [5,7,9,...)
</span></td></tr><tr><td>15</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">count</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">5</span><span class="z-punctuation z-separator z-arguments z-python">,</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>16</td><td>
</td></tr><tr><td>17</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_prime</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-keyword z-operator z-arithmetic z-python">-</span><span class="z-constant z-numeric z-integer z-decimal z-python">1</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span>
</td></tr></span></tbody></table></code></pre>
<h4 id="update-loop"><a class="zola-anchor" href="#update-loop" aria-label="Anchor link for: update-loop">Update Loop</a></h4>
<p>With the max prime value being initialized before the loop, I can update the while loop to be <code>while max_prime &lt; final_number</code> (i.e. conversion from a &quot;do-while&quot; to a regular &quot;while&quot; loop).
This update removes the <code>max_prime</code> check inside the loop.</p>
<p>Then inside, I make a small update to the search for the number of primes.
In the attempt before, the loop would stop once it reaches the prime squared.
I still do this, but I skip over the prime value squared to run one more loop. </p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>29</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count of how many numbers (all primes) are between p and p^2
</span></td></tr><tr><td>30</td><td><span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>31</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip the first composite number and stop the loop
</span></td></tr><tr><td>32</td><td>    <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>33</td><td>        <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>34</td><td>        <span class="z-keyword z-control z-flow z-break z-python">break</span>
</td></tr><tr><td>35</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count the next prime helper number
</span></td></tr><tr><td>36</td><td>    <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>Once the prime square is skipped, I can also take the number up to the multiplication of the current prime (<code>prime_0</code>) and the next smallest prime (<code>prime_1</code>).
These numbers are also guaranteed to be prime because the next composite number is guaranteed to be the <code>prime_0</code> * <code>prime_1</code>, since it is the combination of the two smallest distinct primes<sup class="footnote-reference"><a href="#remaining-composite-multiples-note">1</a></sup>.
This should provide more numbers to help with finding the pattern.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>38</td><td><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_helper</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-constant z-numeric z-integer z-decimal z-python">0</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span>
</td></tr><tr><td>39</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> While the next number is smaller than p*p+1, add the next number to helping list
</span></td></tr><tr><td>40</td><td><span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_helper</span></span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>41</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count the next prime helper number
</span></td></tr><tr><td>42</td><td>    <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>Because of the expanded list of helping primes, I updated the between list to include the current prime cubed (as the new final multiple). </p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>45</td><td><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">sorted</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-constant z-numeric z-integer z-decimal z-python">3</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">p</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>The for-loop after is kept the same.
Once all the numbers are found and tallied up, I find the shortest repeating pattern like before using the keep list, but with a small twist.
First, the keep list does not exclude the first item anymore, as now two items are already accounted for in the pattern. 
Instead, once the pattern repetition is found, I have to move the beginning two numbers to the end.
This is because getting the prime before the current prime squared has already exhausted the range.
Similar for the primes up to current prime times next prime.
In order to keep the order correct, this means &quot;rotating&quot; the list to shift everything two units back and move the first two numbers to the end of the pattern.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>73</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip first in list because already processed
</span></td></tr><tr><td>74</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">key</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">key</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">sorted</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">keys</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>75</td><td>
</td></tr><tr><td>76</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Find the pattern
</span></td></tr><tr><td>77</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">shortest_periodic_pattern</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>78</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">deque</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-punctuation z-separator z-slice z-python">:</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span> <span class="z-keyword z-operator z-comparison z-python">&gt;</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span> <span class="z-keyword z-control z-conditional z-else z-python">else</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>79</td><td><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">rotate</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-keyword z-operator z-arithmetic z-python">-</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>80</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-type z-python">list</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr></span></tbody></table></code></pre>
<p>Once the pattern is determined, the current prime can be moved to the already processed list and the current range can be updated.
Since the range has removed all numbers till the multiplication of the two lowest primes, I had to update the assertion.</p>
<pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>88</td><td><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Remove prime_0 * prime_1 from the current range        
</span></td></tr><tr><td>89</td><td><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">mult_of_lowest_two_primes</span></span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">generator_take_first</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>90</td><td>
</td></tr><tr><td>91</td><td><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Verify that we have reached prime_0 * prime_1
</span></td></tr><tr><td>92</td><td><span class="z-keyword z-control z-flow z-assert z-python">assert</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">mult_of_lowest_two_primes</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_helper</span></span> 
</td></tr></span></tbody></table></code></pre>
<p>After the update, the while-loop should automatically stop once the number of primes reaches the final number (likely slightly faster since there are more numbers in the helper list).</p>
<h4 id="full-code-1"><a class="zola-anchor" href="#full-code-1" aria-label="Anchor link for: full-code-1">Full Code</a></h4>
<details>
    
    <summary>Attempt 2 Full Code</summary>
    
    
    <pre data-linenos data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><table><tbody><tr><td>1</td><td><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">new_sieve_attempt_2</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">final_number</span></span><span class="z-meta z-function z-parameters z-annotation z-python"><span class="z-punctuation z-separator z-annotation z-parameter z-python">:</span><span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">int</span></span> </span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1573</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python"> </span><span class="z-meta z-function z-annotation z-return z-python"><span class="z-punctuation z-separator z-annotation z-return z-python">-&gt;</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">int</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span></span><span class="z-meta z-function z-python"><span class="z-punctuation z-section z-function z-begin z-python">:</span></span>
</td></tr><tr><td>2</td><td>    
</td></tr><tr><td>3</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Special case: There are no primes less than 2
</span></td></tr><tr><td>4</td><td>    <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">final_number</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>5</td><td>        <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-sequence z-list z-empty z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>6</td><td>
</td></tr><tr><td>7</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Primes that have already been processed and whose multiples can never appear in the range
</span></td></tr><tr><td>8</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>9</td><td>
</td></tr><tr><td>10</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Prime numbers that are between p_0 (currently processing prime) and p_1 (prime just after)
</span></td></tr><tr><td>11</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   To help find the keep pattern
</span></td></tr><tr><td>12</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">deque</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-constant z-numeric z-integer z-decimal z-python">3</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>13</td><td>    
</td></tr><tr><td>14</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> The range that is running
</span></td></tr><tr><td>15</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   Starts the unbounded range with 5 and step by 2: [5,7,9,...)
</span></td></tr><tr><td>16</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">count</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">5</span><span class="z-punctuation z-separator z-arguments z-python">,</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>17</td><td>
</td></tr><tr><td>18</td><td>    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_prime</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-keyword z-operator z-arithmetic z-python">-</span><span class="z-constant z-numeric z-integer z-decimal z-python">1</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span>
</td></tr><tr><td>19</td><td>
</td></tr><tr><td>20</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> while max prime is less than the final number 
</span></td></tr><tr><td>21</td><td>    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>   (meaning not all primes reached in range of final number)
</span></td></tr><tr><td>22</td><td>    <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_prime</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">final_number</span></span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>23</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> The current prime to sieve (ref as &quot;p&quot; in comments)
</span></td></tr><tr><td>24</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">popleft</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>25</td><td>
</td></tr><tr><td>26</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Make current range with one look ahead
</span></td></tr><tr><td>27</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peekable</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>28</td><td>        
</td></tr><tr><td>29</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count of how many numbers (all primes) are between p and p^2
</span></td></tr><tr><td>30</td><td>        <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>31</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip the first composite number and stop the loop
</span></td></tr><tr><td>32</td><td>            <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>33</td><td>                <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>34</td><td>                <span class="z-keyword z-control z-flow z-break z-python">break</span>
</td></tr><tr><td>35</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count the next prime helper number
</span></td></tr><tr><td>36</td><td>            <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>37</td><td>        
</td></tr><tr><td>38</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_helper</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-constant z-numeric z-integer z-decimal z-python">0</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span>
</td></tr><tr><td>39</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> While the next number is smaller than p*p+1, add the next number to helping list
</span></td></tr><tr><td>40</td><td>        <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_helper</span></span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>41</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count the next prime helper number
</span></td></tr><tr><td>42</td><td>            <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>43</td><td>        
</td></tr><tr><td>44</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a list of multiples divisible by sieving prime not already removed from before
</span></td></tr><tr><td>45</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">sorted</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-keyword z-operator z-arithmetic z-python">*</span><span class="z-constant z-numeric z-integer z-decimal z-python">3</span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">p</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>46</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a copy of the current range 
</span></td></tr><tr><td>47</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">tee</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>48</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Make the copied range peekable
</span></td></tr><tr><td>49</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peekable</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>50</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Create a counter to count how many numbers are between two multiples of p
</span></td></tr><tr><td>51</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">Counter</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>52</td><td>
</td></tr><tr><td>53</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> For each start and end point (a number in between list and the next number after)
</span></td></tr><tr><td>54</td><td>        <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">start</span><span class="z-punctuation z-separator z-target-list z-python">,</span> <span class="z-meta z-generic-name z-python">end</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">zip</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-constant z-numeric z-integer z-decimal z-python">1</span><span class="z-punctuation z-separator z-slice z-python">:</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>55</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count how many primes from helping primes list are in between start and end
</span></td></tr><tr><td>56</td><td>            <span class="z-meta z-statement z-loop z-for z-python"><span class="z-keyword z-control z-loop z-for z-python">for</span> <span class="z-meta z-generic-name z-python">helper</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span><span class="z-meta z-statement z-loop z-for z-python"> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-statement z-loop z-for z-python"><span class="z-punctuation z-section z-block z-loop z-for z-python">:</span></span>
</td></tr><tr><td>57</td><td>                <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helper</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>58</td><td>                    <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-sequence z-tuple z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-sequence z-end z-python">)</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-keyword z-operator z-assignment z-augmented z-python">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span>
</td></tr><tr><td>59</td><td> 
</td></tr><tr><td>60</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip the number if it is the start or end 
</span></td></tr><tr><td>61</td><td>            <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>62</td><td>            <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-logical z-python">or</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</td></tr><tr><td>63</td><td>                <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>64</td><td>                <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>65</td><td>
</td></tr><tr><td>66</td><td>            <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Count how many items that are between start and end inside the copied range
</span></td></tr><tr><td>67</td><td>            <span class="z-meta z-statement z-loop z-while z-python"><span class="z-keyword z-control z-loop z-while z-python">while</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-block z-loop z-while z-python">:</span></span>
</td></tr><tr><td>68</td><td>                <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">next</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>69</td><td>                <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-sequence z-tuple z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">start</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">end</span></span><span class="z-punctuation z-section z-sequence z-end z-python">)</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-keyword z-operator z-assignment z-augmented z-python">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span>
</td></tr><tr><td>70</td><td>                <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">peek_value</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">collapsable_range</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">peek</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>71</td><td>
</td></tr><tr><td>72</td><td>
</td></tr><tr><td>73</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Skip first in list because already processed
</span></td></tr><tr><td>74</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">key</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">key</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">sorted</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">between_counter</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">keys</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr><tr><td>75</td><td>       
</td></tr><tr><td>76</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Find the pattern
</span></td></tr><tr><td>77</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">shortest_periodic_pattern</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>78</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">deque</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-punctuation z-separator z-slice z-python">:</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span> <span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern_length</span></span> <span class="z-keyword z-operator z-comparison z-python">&gt;</span> <span class="z-constant z-numeric z-integer z-decimal z-python">1</span> <span class="z-keyword z-control z-conditional z-else z-python">else</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">keep_list</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>79</td><td>        <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">rotate</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-keyword z-operator z-arithmetic z-python">-</span><span class="z-constant z-numeric z-integer z-decimal z-python">2</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>80</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-type z-python">list</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>81</td><td>        
</td></tr><tr><td>82</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Finished with prime so move it to already sieved
</span></td></tr><tr><td>83</td><td>        <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">append</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>84</td><td>        
</td></tr><tr><td>85</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Get the max prime
</span></td></tr><tr><td>86</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">max_prime</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-item-access z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-begin z-python">[</span></span><span class="z-meta z-item-access z-arguments z-python"><span class="z-keyword z-operator z-arithmetic z-python">-</span><span class="z-constant z-numeric z-integer z-decimal z-python">1</span></span><span class="z-meta z-item-access z-python"><span class="z-punctuation z-section z-brackets z-end z-python">]</span></span>
</td></tr><tr><td>87</td><td>
</td></tr><tr><td>88</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Remove prime_0 * prime_1 from the current range        
</span></td></tr><tr><td>89</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">mult_of_lowest_two_primes</span></span>, <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">generator_take_first</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>90</td><td>        
</td></tr><tr><td>91</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Verify that we have reached prime_0 * prime_1
</span></td></tr><tr><td>92</td><td>        <span class="z-keyword z-control z-flow z-assert z-python">assert</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">mult_of_lowest_two_primes</span></span> <span class="z-keyword z-operator z-comparison z-python">==</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_prime</span></span> <span class="z-keyword z-operator z-arithmetic z-python">*</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sieving_helper</span></span> 
</td></tr><tr><td>93</td><td>
</td></tr><tr><td>94</td><td>        <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Produce the next range
</span></td></tr><tr><td>95</td><td>        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">generator_keep_then_skip_once</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">current_running_range</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pattern</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</td></tr><tr><td>96</td><td>
</td></tr><tr><td>97</td><td>    <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">already_sieved_primes</span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-meta z-expression z-generator z-python"><span class="z-keyword z-control z-loop z-for z-generator z-python">for</span> <span class="z-meta z-generic-name z-python">p</span> <span class="z-keyword z-control z-loop z-for z-in z-python">in</span></span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">helping_sieve_primes</span></span> <span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">p</span></span> <span class="z-keyword z-operator z-comparison z-python">&lt;=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">final_number</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>
</td></tr></span></tbody></table></code></pre>

    
</details><h4 id="analysis-1"><a class="zola-anchor" href="#analysis-1" aria-label="Anchor link for: analysis-1">Analysis</a></h4>
<p>With this second attempt finished, I have done slightly better than my attempt 1.
Now, it fails at $1573$ ($11^2 * 13$). 
Also, the assertion now fails at $61$, where the result should be $4087$ ($61*67$), but is actually $4093$ (which is surprisingly prime).</p>
<p>I think I see the problem being just that I don't use the square as another thing to multiply the helper primes by, which should be an easy patch. 
But this demonstrates a more fundamental issue: I have no idea how the pattern is calculated.
While the idea to pre-process the range did help remove certain steps of the calculations and adding more helping primes helped increase the pattern sequence, neither did much for finding the actual pattern.</p>
<p>The big thing here is that I need to figure out how the pattern is derived.
Currently, I get it by making a copy of the range and assuming the repetition happens.
However, that might not be the case, so it might be time to look into the underlying mathematics of this problem.</p>
<h2 id="conclusion"><a class="zola-anchor" href="#conclusion" aria-label="Anchor link for: conclusion">Conclusion</a></h2>
<p>So based on these results, did I succeed? 
While I didn't get to the result of actually getting the generator working, this did provide some helpful insight into how I might approach future attempts.
Namely, I am going to need to figure out how best to find the pattern for any given prime and how much information is needed to accomplish that task.</p>
<p>In the next post, I will take a step back and try to review some of the mathematical ideas present for this problem and review other kinds of solutions related to the Sieve of Eratosthenes.</p>
<h2 id="footnotes"><a class="zola-anchor" href="#footnotes" aria-label="Anchor link for: footnotes">Footnotes</a></h2>
<div class="footnote-definition" id="remaining-composite-multiples-note"><sup class="footnote-definition-label">1</sup>
<p>Possibly as an extension of this idea, one might try to see if the third composite number would always be the current prime times the second next prime (which could give even more primes to help). Unfortunately, that is note the case. The smallest counterexample for my created range is $5$: $5 * 11 = 55$ but $7^2 = 49$.</p>
</div>

</section>


        
<footer id="bottom-aside">
 

<section class="grid">
    
    <article>
        <a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-0&#x2F;">
            <p>
                <strong>Part 0: Background and Intro</strong>
                <br />
                <small>Background information about sieving process and an introduction to the coding idea.</small>
                <br />
                <em>
                    <svg width="36" height="36" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <use href='https:&#x2F;&#x2F;thetechtreeblog.com/feather-sprite.svg#arrow-left' />
                    </svg>
                    Previous
                </em>
            </p>
        </a>
    </article>
    
    <div></div>
    
    <article>
        <a href="https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;blog&#x2F;better_sieve&#x2F;part-2&#x2F;">
            <p>
                <strong>Part 2: Taking a step back</strong>
                <br />
                <small>Going over some ideas learned researching this problem.</small>
                <br />
                <em>
                    Next
                    <svg width="36" height="36" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <use href='https:&#x2F;&#x2F;thetechtreeblog.com/feather-sprite.svg#arrow-right' />
                    </svg>
                </em>
            </p>
        </a>
    </article>
    
</section>


<hgroup>
    <h2 id="comments"> <a href="#comments" class="zola-anchor">Comment Section</a></h2>
    <p>
        <strong>Powered by Giscus</strong>
        </p>
        <p>
            <small><em>Note: You can go directly to GitHub Discussion at <a
                        href="https://github.com/SurajSSingh/Tech-Tree-Blog/discussions/">https://github.com/SurajSSingh/Tech-Tree-Blog/discussions/</a>
                    to comment</em></small>
    </p>
</hgroup>
<script src="https://giscus.app/client.js" data-repo="SurajSSingh/Tech-Tree-Blog" data-repo-id="R_kgDOICIt2g"
    data-category="Comments"
    data-category-id="DIC_kwDOICIt2s4CTop9" data-mapping="title" data-strict="1" data-reactions-enabled="1"
    data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy"
    crossorigin="anonymous" async>
    </script>
<noscript>
    <p>Comments cannot be rendered</p>
</noscript>

</footer>

      </article>
    </main>
    <footer>
      
      



<a role="img" href='https:&#x2F;&#x2F;thetechtreeblog.com&#x2F;atom.xml' title='Atom Feed'
    data-tooltip='Atom Feed' data-placement='top'
    aria-label="Atom Feed">
    <title>Atom Feed</title>
    <svg width="36" height="36" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class=''>
        <use href='https:&#x2F;&#x2F;thetechtreeblog.com/feather-sprite.svg#rss' />
    </svg>
</a>











<a role="img" href='https:&#x2F;&#x2F;github.com&#x2F;SurajSSingh&#x2F;' title='GitHub'
    data-tooltip='GitHub' data-placement='top'
    aria-label="GitHub">
    <title>GitHub</title>
    <svg width="36" height="36" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class='feather'>
        <use href='https:&#x2F;&#x2F;thetechtreeblog.com/feather-sprite.svg#github' />
    </svg>
</a>










<a role="img" href='https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;suraj-s-singh&#x2F;' title='Linkedin'
    data-tooltip='Linkedin' data-placement='top'
    aria-label="Linkedin">
    <title>Linkedin</title>
    <svg width="36" height="36" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class='feather'>
        <use href='https:&#x2F;&#x2F;thetechtreeblog.com/feather-sprite.svg#linkedin' />
    </svg>
</a>


<p>Â© 2023 <a href="https://surajssingh.github.io">Suraj S. Singh</a></p>
<p> Created with <a href="https://www.getzola.org/">Zola</a>, <a href="https://picocss.com/">Pico.CSS</a>, and <a
        href="https://feathericons.com"> Feather Icons</a>.</p>
<p>Hosted on <a href="https://github.com/surajssingh/Tech-Tree-Blog">GitHub</a>.</p>
      
    </footer>
  </body>

</html>